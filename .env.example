# MICROSERVICES ENVIRONMENT CONFIGURATION
# This file contains environment variables for all microservices
# Update sensitive values for production use

# ========================================
# GLOBAL SHARED VALUES - DEFINE ONCE, USE EVERYWHERE
# ========================================

# GLOBAL ADMIN CREDENTIALS
ADMIN_USER=admin
ADMIN_PASSWORD=SecureAdminPass2024!
ADMIN_EMAIL=admin@yourcompany.com

# SHARED DATABASE VALUES
SHARED_DB_PASSWORD=${ADMIN_PASSWORD}
MYSQL_PORT_DEFAULT=3306
POSTGRES_PORT_DEFAULT=5432

# ========================================
# DATABASE SERVICES
# ========================================

# --- MariaDB Configuration (Port: 8501) ---
MARIADB_HOST=mariadb
MARIADB_PORT=${MYSQL_PORT_DEFAULT}
MARIADB_ROOT_PASSWORD=${SHARED_DB_PASSWORD}
MARIADB_DATABASE=main_db
MARIADB_USER=${ADMIN_USER}
MARIADB_PASSWORD=${SHARED_DB_PASSWORD}

# --- MySQL Configuration (Port: 8505) ---
MYSQL_HOST=mysql
MYSQL_PORT=${MYSQL_PORT_DEFAULT}
MYSQL_ROOT_PASSWORD=${SHARED_DB_PASSWORD}
MYSQL_DATABASE=app_db
MYSQL_CUSTOM_USER=app_user
MYSQL_CUSTOM_USER_PASSWORD=${SHARED_DB_PASSWORD}

# --- PostgreSQL Configuration (Port: 8502) ---
POSTGRES_HOST=postgres
POSTGRES_PORT=${POSTGRES_PORT_DEFAULT}
POSTGRES_USER=${ADMIN_USER}
POSTGRES_PASSWORD=${SHARED_DB_PASSWORD}
POSTGRES_CUSTOM_USER=app_user
POSTGRES_CUSTOM_USER_PASSWORD=${SHARED_DB_PASSWORD}
POSTGRES_MULTIPLE_DATABASES=main_db,analytics_db,logs_db

# --- MongoDB Configuration (Port: 8503) ---
MONGO_INITDB_ROOT_USERNAME=${ADMIN_USER}
MONGO_INITDB_ROOT_PASSWORD=${SHARED_DB_PASSWORD}
MONGO_CUSTOM_USER=app_user
MONGO_CUSTOM_USER_PASSWORD=${SHARED_DB_PASSWORD}
MONGO_INITDB_DATABASE=app_mongo_db

# --- Redis Configuration (Port: 8504) ---
REDIS_PASSWORD=${SHARED_DB_PASSWORD}
REDIS_COMMANDER_USER=${ADMIN_USER}
REDIS_COMMANDER_PASSWORD=${SHARED_DB_PASSWORD}
REDIS_DB=0

# ========================================
# DATABASE MANAGEMENT TOOLS
# ========================================

# --- Metabase Configuration (Port: 8085) ---
MB_DB_TYPE=postgres
MB_DB_DBNAME=metabase_db
MB_DB_PORT=${POSTGRES_PORT_DEFAULT}
MB_DB_USER=${ADMIN_USER}
MB_DB_PASS=${SHARED_DB_PASSWORD}
MB_DB_HOST=${POSTGRES_HOST}
MB_DB_FILE=/metabase-data/metabase.db

# ========================================
# BACKEND SERVICES
# ========================================

# --- PHP Configuration (Ports: 8000, 5173) ---
PHP_MEMORY_LIMIT=512M

# ========================================
# ANALYTICS & MONITORING
# ========================================

# --- Grafana Configuration (Port: 9001) ---
GF_SECURITY_ADMIN_USER=${ADMIN_USER}
GF_SECURITY_ADMIN_PASSWORD=${ADMIN_PASSWORD}
GF_PATHS_DATA=/var/lib/grafana
GF_PATHS_LOGS=/var/log/grafana

# --- Matomo Analytics Configuration (Port: 9010) ---
MATOMO_DATABASE_HOST=${MYSQL_HOST}
MATOMO_DATABASE_ADAPTER=mysql
MATOMO_DATABASE_TABLES_PREFIX=matomo_
MATOMO_DATABASE_USERNAME=${ADMIN_USER}
MATOMO_DATABASE_PASSWORD=${SHARED_DB_PASSWORD}
MATOMO_DATABASE_DBNAME=matomo_db

# --- NocoDB Configuration (Port: 8086) ---
NC_DATABASE_NAME=nocodb
NC_DATABASE_USER=${ADMIN_USER}
NC_DATABASE_USER_PASSWORD=${SHARED_DB_PASSWORD}
NOCODB_DOMAIN="nocodb.domain.com"

# ========================================
# PROXY & NETWORKING
# ========================================

# --- Nginx Proxy Manager Configuration (Ports: 80, 443, 81) ---
DB_MYSQL_HOST=${MYSQL_HOST}
DB_MYSQL_PORT=${MYSQL_PORT_DEFAULT}
DB_MYSQL_USER=${ADMIN_USER}
DB_MYSQL_PASSWORD=${SHARED_DB_PASSWORD}
DB_MYSQL_NAME=nginx_proxy_manager
INITIAL_ADMIN_EMAIL=${ADMIN_EMAIL}
INITIAL_ADMIN_PASSWORD=${ADMIN_PASSWORD}

# ========================================
# DEVELOPMENT & INTEGRATION
# ========================================

# --- GitHub Configuration ---
# TODO: Replace with your actual GitHub token for production
GITHUB_TOKEN=ghp_your_github_personal_access_token_here
GITHUB_USER=your_github_username

# ========================================
# PRODUCTION NOTES
# ========================================
# Before deploying to production, update the following:
# 1. Change ADMIN_PASSWORD (this will update ALL passwords automatically)
# 2. Update ADMIN_EMAIL to your actual admin email
# 3. Update GitHub token with proper permissions
# 4. Consider using Docker secrets for sensitive values
# 5. Custom DB Users will not exist unless setup-databases.sh is run